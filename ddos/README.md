# Denial of service attacks

This example covers two attacks that are based on the same topology [ddos.imn](ddos.imn).

## Smurf attack
Start the experiment and issue the ping command on the PC virtual node:
```console
root@PC:/ # ping 10.0.1.10
PING 10.0.1.10 (10.0.1.10): 56 data bytes
64 bytes from 10.0.1.10: icmp_seq=0 ttl=63 time=3.339 ms
64 bytes from 10.0.1.10: icmp_seq=1 ttl=63 time=2.011 ms
64 bytes from 10.0.1.10: icmp_seq=2 ttl=63 time=2.008 ms
```
Don't stop the command.

### Executing the attack

The attack is performed through the script [smurf.sh](smurf.sh):
```console
# ./smurf.sh
```

Now we can see the change in the ping output on the PC:
```console
64 bytes from 10.0.1.10: icmp_seq=16 ttl=63 time=6.006 ms
64 bytes from 10.0.1.10: icmp_seq=17 ttl=63 time=6.006 ms
64 bytes from 10.0.1.10: icmp_seq=19 ttl=63 time=6.003 ms
```
The delay has increased from 2ms to 6ms and certain packets get lost because of the high traffic volume.


## NTP amplification attack
Start the experiment. After starting the experiment the ntp servers on the *n#* nodes need to be started. This is done by using the [ntp.sh](ntp.sh) script. This script also handles crafting of attack packets (with scapy) and records them in a pcap file on the Attacker virtual node.
```console
# ./ntp.sh
```

Start the ping command on the PC virtual node:
```console
root@PC:/ # ping 10.0.1.10
PING 10.0.1.10 (10.0.1.10): 56 data bytes
64 bytes from 10.0.1.10: icmp_seq=0 ttl=63 time=3.339 ms
64 bytes from 10.0.1.10: icmp_seq=1 ttl=63 time=2.011 ms
64 bytes from 10.0.1.10: icmp_seq=2 ttl=63 time=2.008 ms
```

### Executing the attack
The attack is performed through the script [ntp_amp.sh](ntp_amp.sh):
```console
# ./ntp_amp.sh
```
This script takes the pcap file generated by [ntp.sh](ntp.sh) and replays it 1 million times using tcpreplay.

If we start a new ping command the output will be the following:
```console
root@PC:/ # ping -c 20 10.0.1.10
PING 10.0.1.10 (10.0.1.10): 56 data bytes
64 bytes from 10.0.1.10: icmp_seq=0 ttl=63 time=0.564 ms
...
64 bytes from 10.0.1.10: icmp_seq=7 ttl=63 time=0.588 ms
64 bytes from 10.0.1.10: icmp_seq=11 ttl=63 time=0.578 ms
...
64 bytes from 10.0.1.10: icmp_seq=19 ttl=63 time=0.601 ms
--- 10.0.1.10 ping statistics ---
20 packets transmitted, 15 packets received, 25.0% packet loss
round-trip min/avg/max/stddev = 0.564/0.592/0.610/0.012 ms
```

By generating higher traffic volumes the server link is overloaded and this results in packet loss.
